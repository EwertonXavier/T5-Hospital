@model T5_Hospital.Models.ViewModels.UpdateVisitation
@{
    ViewBag.Title = "Edit Visitation Record";
}

<div class="row">
    <div class="col-sm-6 col-sm-offset-3">
        <div class="list-group">
            <div class="list-group-item">
                <h2 class="list-group-item-heading text-center">Edit Visitation Record</h2>
                <form class="form-horizontal" method="post" action="/Visitation/Edit/@Model.VisitationRecord.VisitationId">
                    <input type="hidden" name="VisitationId" value="@Model.VisitationRecord.VisitationId" />
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="arrivateDate">Arrival Date</label>
                        <div class="col-sm-8">
                            <input id="arrivateDate" class="form-control" type="date" min="@DateTime.Now" name="ArrivalDate" value="@Model.VisitationRecord.ArrivalDate.ToUniversalTime().ToString("u").Split(' ')[0]" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="departureDate">Departure Date</label>
                        <div class="col-sm-8">
                            <input id="departureDate" class="form-control" type="date" min="@DateTime.Now" name="DepartureDate" value="@Model.VisitationRecord.DepartureDate.ToUniversalTime().ToString("u").Split(' ')[0]" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="patient">Patient</label>
                        <div class="col-sm-8">
                            <select id="patient" class="form-control" name="PatientId">
                                @foreach (var patient in Model.CurrentPatients)
                                {
                                    if (patient.PatientId == Model.VisitationRecord.PatientId)
                                    {
                                        <option value="@patient.PatientId" selected>@patient.FirstName @patient.LastName</option>
                                    }
                                    else
                                    {
                                        <option value="@patient.PatientId">@patient.FirstName @patient.LastName</option>
                                    }
                                }
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="visitor">Visitor</label>
                        <div class="col-sm-8">
                            <select id="visitor" class="form-control" name="VisitorId">
                                @foreach (var visitor in Model.CurrentVisitors)
                                {
                                    if (visitor.VisitorId == Model.VisitationRecord.VisitorId)
                                    {
                                        <option value="@visitor.VisitorId" selected>@visitor.FirstName @visitor.LastName</option>
                                    }
                                    else
                                    {
                                        <option value="@visitor.VisitorId">@visitor.FirstName @visitor.LastName</option>
                                    }
                                }
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="relationToVisitor">Relation To Visitor</label>
                        <div class="col-sm-8">
                            <input id="relationToVisitor" class="form-control" type="text" name="RelationToVisitor" value="@Model.VisitationRecord.RelationToVisitor" />
                        </div>
                    </div>
                    <div class="form-group text-center">
                        <input class="btn btn-primary" type="submit" value="Update" />
                        <a href="/Visitation/Details/@Model.VisitationRecord.VisitationId" class="btn btn-danger">Cancel</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>